import pdfplumber
import os
import google.generativeai as genai
from fpdf import FPDF
import pandas as pd
from langchain.chains import LLMChain
from langchain.prompts import PromptTemplate
from langchain_google_genai import ChatGoogleGenerativeAI  # Import ChatGoogleGenerativeAI
import re
from reportlab.lib.pagesizes import A4
from reportlab.platypus import SimpleDocTemplate, Table, TableStyle, Paragraph, Spacer, ListFlowable, ListItem
from reportlab.lib.styles import getSampleStyleSheet
from reportlab.lib import colors
from reportlab.lib.units import inch
import streamlit as st

# Function to extract text from PDF using pdfplumber
def extract_text_from_report(file_path):
    text = ''
    with pdfplumber.open(file_path) as pdf:
        for page in pdf.pages:
            page_text = page.extract_text()
            if page_text:  # Ensure the page has text before adding
                text += page_text + '\n'  # Add a newline for better formatting
    return text

# Main function to extract and save the reports
def clinical(pdf_file_path):
    all_extracted_data = []
    extracted_data = extract_text_from_report(pdf_file_path)
    all_extracted_data.append(extracted_data)
    return all_extracted_data

# Initialize Google Generative AI
API_KEY = "AIzaSyB3G190RAtCWcvl7NyYDL5GqtaEWW1v2w0"
os.environ["GOOGLE_API_KEY"] = API_KEY
genai.configure(api_key=os.environ["GOOGLE_API_KEY"])

# Create the model
generation_config = {
    "temperature": 0.3,
    "top_p": 0.95,
    "top_k": 64,
    "max_output_tokens": 8192,
    "response_mime_type": "text/plain",
}

model = genai.GenerativeModel(
    model_name="gemini-1.5-flash",
    generation_config=generation_config,
)

response = model.generate_content([
  "input: report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nreport 2 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: Downtown Medical Center\nDate of Visit: 2024-09-12\nDoctor: Dr. Robert Allen\nChief Complaints: ['1. Intermittent chest pressure\\n2. Episodes of fatigue\\n3. Occasional palpitations']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 145/90 mmHg', 'Heart': 'Rate 88 bpm', 'Respiratory': 'Rate 22 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: None\nNeurological: None\nDiagnosis: Stable angina; recommend exercise tolerance test.\nTreatment Recommendations: ['1. Start Metoprolol 25mg once daily\\n2. Schedule treadmill stress test\\n3. Cardiac rehabilitation referral']\nFollow-Up Instructions: Return in 2 weeks for stress test results.",
  "output: Comprehensive Clinical Evaluation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nIntermittent chest pressure\nShortness of breath\nDizziness and lightheadedness\nEpisodes of fatigue\nOccasional palpitations\n\nVital Signs:\nBlood Pressure: Ranged from 145/90 mmHg to 150/95 mmHg\nHeart Rate: Ranged from 88 bpm to 92 bpm\nRespiratory Rate: Ranged from 20 to 22 breaths/min\nTemperature: 98.6째F - 98.7째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur detected at the lower sternal border during the initial examination, with regular heart rhythm. No further abnormalities noted in later evaluations.\nNeurological: No focal neurological deficits observed. Cranial nerves II-XII intact throughout evaluations.\nDiagnosis:\nStable angina with possible coronary artery disease, warranting further investigation and testing (e.g., exercise tolerance test).\n\nTreatment Recommendations:\nAmlodipine 5 mg once daily for blood pressure management\nMetoprolol 25 mg once daily for heart rate control and symptom relief\nNitroglycerin as needed for chest pain\nCardiac rehabilitation referral\nTreadmill stress test to evaluate exercise tolerance and heart function\nReferral to cardiology for further evaluation\nFollow-Up Instructions:\nReturn for reevaluation and to review results of the stress test. Regular follow-up is recommended to monitor angina and cardiovascular status.",
  "input: Report 1 : \nReport Type: Lab and Diagnostic Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate of Report: 2024-09-14\nDoctor: Dr. Sarah Johnson\n\nComplete Blood Count (CBC):\nWhite Blood Cells  :  6.8x10^9/L  , Reference Range : 4.0-11.0 x 10^9/L\nHemoglobin    : 14.0 g/dL, Reference Range= 13.0-17.0 g/dL\nHematocrit    : 42%,  Reference Range=38.0-50.0%\nPlatelet Count  :280x10^9/L , Reference Range=  150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol  :230 mg/dL  ,Reference Range= <200 mg/dL\nLDL  :170 mg/dL ,Reference Range= <100 mg/dL\nHDL  :40 mg/dL  , Reference Range=>40 mg/dL\nTriglycerides  :22 mg/dL , Reference Range=<150 mg/dL\n\nInterpretation: Mild dyslipidemia; diet and exercise changes advised.\nRecommendations: Follow-up lipid panel in 3 months.\n\nReport 2 :\nReport Type: Lab and Diagnostic Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate of Report: 2024-08-14\nDoctor: Dr. Emily Wong\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 7.2x10^9/L ,Reference Range= 4.0-11.0 x 10^9/L\nHemoglobin: 13.5 g/dL ,Reference Range=13.0-17.0 g/dL\nHematocrit : 40% ,Reference Range=38.0-50.0%\nPlatelet Count: 250x10^9/L ,Reference Range=150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol :240 mg/dL ,Reference Range=<200 mg/dL\nLDL: 160 mg/dL ,Reference Range= <100 mg/dL\nHDL: 38 mg/dL ,Reference Range= >40 mg/dL\nTriglycerides: 200 mg/dL ,Reference Range= <150 mg/dL\n\nInterpretation: Mild hypertension-related changes; further ischemic workup recommended.\nRecommendations: Schedule a follow-up for stress testing.",
  "output: Lab and Diagnostic Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 6.8 - 7.2 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 13.5 - 14.0 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 40% - 42% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 250 - 280 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 230 - 240 mg/dL (Reference Range: <200 mg/dL)\nLDL: 160 - 170 mg/dL (Reference Range: <100 mg/dL)\nHDL: 38 - 40 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 200 - 220 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation:\nMild dyslipidemia and mild hypertension-related changes noted; diet and exercise changes are advised. Further ischemic workup is recommended.\n\nRecommendations:\nFollow-up lipid panel in 3 months.\nSchedule a follow-up for stress testing",
  "input: Report 1 : \nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nMedications Prescribed:\n- Medication: Amlodipine\n  Dosage: 5mg\n  Frequency: Once daily\n\n- Medication: Nitroglycerin\n  Dosage: 0.4mg\n  Frequency: As needed\n\n- Medication: Atorvastatin\n  Dosage: 20mg\n  Frequency: Once daily\n\n\nObservations:\nMonitor for side effects: Edema, Dizziness\nLiver function tests for atorvastatin recommended in 6 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.\nGenerated by Healthcare System\n\nReport 2 :\nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate: 2024-09-15\nDoctor: Dr. Emily Parker\n\nMedications Prescribed:\n- Medication: Metoprolol\n  Dosage: 25mg\n  Frequency: Once daily\n\n- Medication: Aspirin\n  Dosage: 81mg\n  Frequency: Once daily\n\n- Medication: Atorvastatin\n  Dosage: 20mg\n  Frequency: Once daily\n\n\nObservations:\nMonitor for side effects: Bradycardia, Hypotension.\nLipid levels should be assessed in 3 months.\n\nNext Review:\nReturn in 1 month for evaluation.\nGenerated by Healthcare System",
  "output: Patient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nMedications Prescribed:\nAmlodipine\nDosage: 5 mg\nFrequency: Once daily\n\nNitroglycerin\nDosage: 0.4 mg\nFrequency: As needed\n\nAtorvastatin\nDosage: 20 mg\nFrequency: Once daily\n\nMetoprolol\nDosage: 25 mg\nFrequency: Once daily\n\nAspirin\nDosage: 81 mg\nFrequency: Once daily\n\nObservations:\nMonitor for side effects:\nAmlodipine: Edema, Dizziness\nMetoprolol: Bradycardia, Hypotension\nLiver function tests for atorvastatin recommended in 6 weeks.\nLipid levels should be assessed in 3 months.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "input: Report 1 :\nSpecialist Consultation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate of Consultation: 2024-08-16\nSpecialist: Dr. Anna Taylor\nConsultation Reason: Further evaluation of chest pain and risk assessment for CAD.\nSpecialist Findings: Coronary angiography indicated; risk factors: Hypertension, Hyperlipidemia.\nPatient educated on lifestyle modifications.\nRecommendations: Follow-up angiography; dietitian referral for diet management.\n\nReport 2:\nSpecialist Consultation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate of Consultation: 2024-09-16\nSpecialist: Dr. Lisa Wong\nConsultation Reason: Assessment for CAD risk factors and management.\nSpecialist Findings: Angina symptoms correlated with exertion.\nStress test results pending; consider coronary angiography based on findings.\nRecommendations: Aggressive management of lipid levels; dietary intervention.",
  "output: Specialist Consultation Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nConsultation Reason:\nFurther evaluation of chest pain and risk assessment for coronary artery disease (CAD).\n\nFindings:\nCoronary angiography indicated; risk factors include hypertension and hyperlipidemia.\nAngina symptoms correlated with exertion.\nStress test results pending; consider coronary angiography based on findings.\nRecommendations:\nFollow-up angiography.\nReferral to a dietitian for dietary management.\nAggressive management of lipid levels and dietary intervention.\nPatient educated on lifestyle modifications.",
  "input: Report 1:\nComprehensive Clinical Evaluation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nIntermittent chest pressure\nShortness of breath\nDizziness and lightheadedness\nEpisodes of fatigue\nOccasional palpitations\n\nVital Signs:\nBlood Pressure: Ranged from 145/90 mmHg to 150/95 mmHg\nHeart Rate: Ranged from 88 bpm to 92 bpm\nRespiratory Rate: Ranged from 20 to 22 breaths/min\nTemperature: 98.6째F - 98.7째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur detected at the lower sternal border during the initial examination, with regular heart rhythm. No further abnormalities noted in later evaluations.\nNeurological: No focal neurological deficits observed. Cranial nerves II-XII intact throughout evaluations.\n\nDiagnosis:\nStable angina with possible coronary artery disease, warranting further investigation and testing (e.g., exercise tolerance test).\n\nTreatment Recommendations:\nAmlodipine 5 mg once daily for blood pressure management\nMetoprolol 25 mg once daily for heart rate control and symptom relief\nNitroglycerin as needed for chest pain\nCardiac rehabilitation referral\nTreadmill stress test to evaluate exercise tolerance and heart function\nReferral to cardiology for further evaluation\nFollow-Up Instructions:\nReturn for reevaluation and to review results of the stress test. Regular follow-up is recommended to monitor angina and cardiovascular status.\n\nReport 2:\nLab and Diagnostic Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 6.8 - 7.2 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 13.5 - 14.0 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 40% - 42% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 250 - 280 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 230 - 240 mg/dL (Reference Range: <200 mg/dL)\nLDL: 160 - 170 mg/dL (Reference Range: <100 mg/dL)\nHDL: 38 - 40 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 200 - 220 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation:\nMild dyslipidemia and mild hypertension-related changes noted; diet and exercise changes are advised. Further ischemic workup is recommended.\n\nRecommendations:\nFollow-up lipid panel in 3 months.\nSchedule a follow-up for stress testing\nReport 3:\nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nMedications Prescribed:\nAmlodipine\nDosage: 5 mg\nFrequency: Once daily\n\nNitroglycerin\nDosage: 0.4 mg\nFrequency: As needed\n\nAtorvastatin\nDosage: 20 mg\nFrequency: Once daily\n\nMetoprolol\nDosage: 25 mg\nFrequency: Once daily\n\nAspirin\nDosage: 81 mg\nFrequency: Once daily\n\nObservations:\nMonitor for side effects:\nAmlodipine: Edema, Dizziness\nMetoprolol: Bradycardia, Hypotension\nLiver function tests for atorvastatin recommended in 6 weeks.\nLipid levels should be assessed in 3 months.\n\nNext Review:\nReturn in 1 month for evaluation.\n\nReport4:\nSpecialist Consultation Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nConsultation Reason:\nFurther evaluation of chest pain and risk assessment for coronary artery disease (CAD).\n\nFindings:\nCoronary angiography indicated; risk factors include hypertension and hyperlipidemia.\nAngina symptoms correlated with exertion.\nStress test results pending; consider coronary angiography based on findings.\nRecommendations:\nFollow-up angiography.\nReferral to a dietitian for dietary management.\nAggressive management of lipid levels and dietary intervention.\nPatient educated on lifestyle modifications.",
  "output: Comprehensive Patient Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nIntermittent chest pressure\nShortness of breath\nDizziness and lightheadedness\nEpisodes of fatigue\nOccasional palpitations\n\nVital Signs:\nBlood Pressure: Ranged from 145/90 mmHg to 150/95 mmHg\nHeart Rate: Ranged from 88 bpm to 92 bpm\nRespiratory Rate: Ranged from 20 to 22 breaths/min\nTemperature: 98.6째F - 98.7째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur detected at lower sternal border during initial examination; regular heart rhythm with no further abnormalities noted.\nNeurological: No focal neurological deficits observed; cranial nerves II-XII intact.\n\nLaboratory and Diagnostic Findings:\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 6.8 - 7.2 x 10^9/L\nHemoglobin: 13.5 - 14.0 g/dL\nHematocrit: 40% - 42%\nPlatelet Count: 250 - 280 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol: 230 - 240 mg/dL\nLDL: 160 - 170 mg/dL\nHDL: 38 - 40 mg/dL\nTriglycerides: 200 - 220 mg/dL\n\nDiagnosis:\nStable angina with possible coronary artery disease (CAD).\nMild dyslipidemia and hypertension-related changes.\n\nTreatment Recommendations:\nAmlodipine: 5 mg once daily for blood pressure management\nMetoprolol: 25 mg once daily for heart rate control and symptom relief\nNitroglycerin: 0.4 mg as needed for chest pain\nAtorvastatin: 20 mg once daily for lipid management\nAspirin: 81 mg once daily\nReferral to cardiac rehabilitation and dietitian for dietary management.\nTreadmill stress test to evaluate exercise tolerance and heart function.\n\nObservations:\nSide Effects Monitoring:\nAmlodipine: Edema, Dizziness\nMetoprolol: Bradycardia, Hypotension\nLiver Function Tests: Recommended for atorvastatin in 6 weeks.\n\nFollow-Up: Lipid levels should be assessed in 3 months.\n\nNext Review:\nReturn in 1 month for evaluation and to review results of the stress test. Regular follow-up is recommended to monitor angina and cardiovascular status.",
  "input: Report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nReport 2 :\nReport Type: Lab and Diagnostic Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate of Report: 2024-08-14\nDoctor: Dr. Emily Wong\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 7.2x10^9/L ,Reference Range= 4.0-11.0 x 10^9/L\nHemoglobin: 13.5 g/dL ,Reference Range=13.0-17.0 g/dL\nHematocrit : 40% ,Reference Range=38.0-50.0%\nPlatelet Count: 250x10^9/L ,Reference Range=150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol :240 mg/dL ,Reference Range=<200 mg/dL\nLDL: 160 mg/dL ,Reference Range= <100 mg/dL\nHDL: 38 mg/dL ,Reference Range= >40 mg/dL\nTriglycerides: 200 mg/dL ,Reference Range= <150 mg/dL\n\nInterpretation: Mild hypertension-related changes; further ischemic workup recommended.\nRecommendations: Schedule a follow-up for stress testing.",
  "output: Unified Clinical Evaluation Report\n\nPatient Information:\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nShortness of breath\nDizziness and lightheadedness\n\nVital Signs:\nBlood Pressure: 150/95 mmHg\nHeart Rate: 92 bpm\nRespiratory Rate: 20 breaths/min\nTemperature: 98.6째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur at lower sternal border, regular rhythm.\nNeurological: No focal neurological deficits; cranial nerves II-XII intact.\n\nDiagnosis:\nStable angina with possible coronary artery disease (CAD).\n\nLab and Diagnostic Findings:\nComplete Blood Count (CBC):\nWhite Blood Cells: 7.2 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 13.5 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 40% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 250 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 240 mg/dL (Reference Range: <200 mg/dL)\nLDL: 160 mg/dL (Reference Range: <100 mg/dL)\nHDL: 38 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 200 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation:\nMild hypertension-related changes noted; further ischemic workup is recommended.\n\nTreatment Recommendations:\nStart Amlodipine 5 mg once daily for blood pressure management.\nNitroglycerin for chest pain as needed.\nReferral to cardiology for further evaluation.\nSchedule a follow-up for stress testing.\n\nFollow-Up Instructions:\nReturn in 1 month for reevaluation and to discuss the results of the follow-up tests.",
  "input: report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nReport 2\nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate: 2024-09-15\nDoctor: Dr. Emily Parker\n\nMedications Prescribed:\n- Medication: Metoprolol\n  Dosage: 25mg\n  Frequency: Once daily\n\n- Medication: Aspirin\n  Dosage: 81mg\n  Frequency: Once daily\n\n- Medication: Atorvastatin\n  Dosage: 20mg\n  Frequency: Once daily\n\n\nObservations:\nMonitor for side effects: Bradycardia, Hypotension.\nLipid levels should be assessed in 3 months.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "output: Unified Clinical Evaluation Report\n\nPatient Information:\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\n\nChief Complaints:\nChest pain radiating to the left arm\nShortness of breath\nDizziness and lightheadedness\n\nVital Signs:\nBlood Pressure: 150/95 mmHg\nHeart Rate: 92 bpm\nRespiratory Rate: 20 breaths/min\nTemperature: 98.6째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur at lower sternal border, regular rhythm.\nNeurological: No focal deficits; cranial nerves II-XII intact.\n\nDiagnosis:\nStable angina with possible coronary artery disease (CAD).\n\nMedications Prescribed:\nMetoprolol: 25 mg, once daily\nAspirin: 81 mg, once daily\nAtorvastatin: 20 mg, once daily\n\nObservations:\nMonitor for side effects: Bradycardia, hypotension.\nLipid levels should be assessed in 3 months.\n\nTreatment Recommendations:\nStart Amlodipine 5 mg once daily for blood pressure management.\nNitroglycerin for chest pain as needed.\nReferral to cardiology for further evaluation.\nReturn in 1 month for evaluation and follow-up.\n\nFollow-Up Instructions:\nReturn in 1 month for reevaluation and to discuss the results of the follow-up tests.",
  "input: report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nReport 2:\nSpecialist Consultation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate of Consultation: 2024-09-16\nSpecialist: Dr. Lisa Wong\nConsultation Reason: Assessment for CAD risk factors and management.\nSpecialist Findings: Angina symptoms correlated with exertion.\nStress test results pending; consider coronary angiography based on findings.\nRecommendations: Aggressive management of lipid levels; dietary intervention.",
  "output: Unified Clinical Evaluation Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nShortness of breath\nDizziness and lightheadedness\n\nVital Signs:\nBlood Pressure: 150/95 mmHg\nHeart Rate: 92 bpm\nRespiratory Rate: 20 breaths/min\nTemperature: 98.6째F\n\nPhysical Examination:\nCardiovascular: Systolic murmur at lower sternal border, regular rhythm.\nNeurological: No focal deficits; cranial nerves II-XII intact.\n\nDiagnosis:\nStable angina with possible coronary artery disease (CAD).\nSpecialist Consultation Findings:\nAngina symptoms correlated with exertion.\nStress test results are pending; consideration for coronary angiography based on findings.\n\nTreatment Recommendations:\nStart Amlodipine 5 mg once daily for blood pressure management.\nNitroglycerin for chest pain as needed.\nReferral to cardiology for further evaluation.\nAggressive management of lipid levels; dietary intervention.\nReturn in 1 month for reevaluation.\n\nFollow-Up Instructions:\nReturn in 1 month for evaluation and to discuss the results of the follow-up tests.",
  "input: Report 1 : \nReport Type: Lab and Diagnostic Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate of Report: 2024-09-14\nDoctor: Dr. Sarah Johnson\n\nComplete Blood Count (CBC):\nWhite Blood Cells  :  6.8x10^9/L  , Reference Range : 4.0-11.0 x 10^9/L\nHemoglobin    : 14.0 g/dL, Reference Range= 13.0-17.0 g/dL\nHematocrit    : 42%,  Reference Range=38.0-50.0%\nPlatelet Count  :280x10^9/L , Reference Range=  150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol  :230 mg/dL  ,Reference Range= <200 mg/dL\nLDL  :170 mg/dL ,Reference Range= <100 mg/dL\nHDL  :40 mg/dL  , Reference Range=>40 mg/dL\nTriglycerides  :22 mg/dL , Reference Range=<150 mg/dL\n\nInterpretation: Mild dyslipidemia; diet and exercise changes advised.\nRecommendations: Follow-up lipid panel in 3 months.\n\nReport 2 :\nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate: 2024-08-15\nDoctor: Dr. Emily Wong\n\nMedications Prescribed:\n- Medication: Amlodipine\n  Dosage: 5mg\n  Frequency: Once daily\n\n- Medication: Nitroglycerin\n  Dosage: 0.4mg\n  Frequency: As needed\n\n- Medication: Atorvastatin\n  Dosage: 20mg\n  Frequency: Once daily\n\n\nObservations:\nMonitor for side effects: Edema, Dizziness\nLiver function tests for atorvastatin recommended in 6 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "output: Unified Clinical Evaluation Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nLab and Diagnostic Results:\nComplete Blood Count (CBC):\nWhite Blood Cells: 6.8 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 14.0 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 42% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 280 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 230 mg/dL (Reference Range: <200 mg/dL)\nLDL: 170 mg/dL (Reference Range: <100 mg/dL)\nHDL: 40 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 220 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation: Mild dyslipidemia; diet and exercise changes advised.\n\nRecommendations: Follow-up lipid panel in 3 months.\n\nMedications Prescribed:\nAmlodipine: 5 mg, once daily\nNitroglycerin: 0.4 mg, as needed\nAtorvastatin: 20 mg, once daily\n\nObservations:\nMonitor for side effects: Edema, Dizziness.\nLiver function tests for atorvastatin recommended in 6 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "input: Report 1 : \nPrescription and Medication Management Report\n\nPatient Information:\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate: 2024-08-15\nDoctor: Dr. Emily Wong\n\nMedications Prescribed:\n- Medication: Amlodipine\n  Dosage: 5mg\n  Frequency: Once daily\n\n- Medication: Nitroglycerin\n  Dosage: 0.4mg\n  Frequency: As needed\n\n- Medication: Atorvastatin\n  Dosage: 20mg\n  Frequency: Once daily\n\n\nObservations:\nMonitor for side effects: Edema, Dizziness\nLiver function tests for atorvastatin recommended in 6 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.\nGenerated by Healthcare System\n\nReport 2:\nSpecialist Consultation Report\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: Downtown Medical Center\nDate of Consultation: 2024-09-16\nSpecialist: Dr. Lisa Wong\n\nConsultation Reason: Assessment for CAD risk factors and management.\n\nSpecialist Findings: Angina symptoms correlated with exertion.\nStress test results pending; consider coronary angiography based on findings.\n\nRecommendations: Aggressive management of lipid levels; dietary intervention.",
  "output: Unified Clinical Report\n\nPatient Information\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\n\nMedications Prescribed:\nAmlodipine: 5 mg, once daily\nNitroglycerin: 0.4 mg, as needed\nAtorvastatin: 20 mg, once daily\n\nObservations:\nMonitor for side effects: Edema, Dizziness\nLiver function tests for atorvastatin recommended in 6 weeks\n\nNext Review:\nReturn in 1 month for evaluation\n\nConsultation Reason: Assessment for CAD risk factors and management\n\nSpecialist Findings:\nAngina symptoms correlated with exertion\nStress test results pending; consider coronary angiography based on findings\n\nRecommendations:\nAggressive management of lipid levels\nDietary intervention",
  "input: report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nreport 2 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: Downtown Medical Center\nDate of Visit: 2024-09-12\nDoctor: Dr. Robert Allen\nChief Complaints: ['1. Intermittent chest pressure\\n2. Episodes of fatigue\\n3. Occasional palpitations']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 145/90 mmHg', 'Heart': 'Rate 88 bpm', 'Respiratory': 'Rate 22 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: None\nNeurological: None\nDiagnosis: Stable angina; recommend exercise tolerance test.\nTreatment Recommendations: ['1. Start Metoprolol 25mg once daily\\n2. Schedule treadmill stress test\\n3. Cardiac rehabilitation referral']\nFollow-Up Instructions: Return in 2 weeks for stress test results.\n\nReport 3:\nReport Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-09-20\nDoctor: Dr. Robert Johnson\nChief Complaints: ['1. Severe fatigue\\n2. Occasional palpitations\\n3. Difficulty sleeping']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 140/85 mmHg', 'Heart': 'Rate 88 bpm', 'Respiratory': 'Rate 18 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: Regular rhythm, no murmurs\nNeurological: No focal deficits observed\nDiagnosis: Uncontrolled hypertension, likely secondary to stress.\nTreatment Recommendations: ['1. Start Lisinopril 10mg once daily\\n2. Advise lifestyle modifications (diet and exercise)\\n3. Schedule follow-up in 2 weeks for blood pressure check']\nFollow-Up Instructions: Return in 2 weeks for follow-up.",
  "output: Comprehensive Clinical Evaluation Report\n\nPatient Information\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to left arm\nIntermittent chest pressure\nShortness of breath\nDizziness and lightheadedness\nEpisodes of fatigue\nOccasional palpitations\nSevere fatigue\nDifficulty sleeping\n\nVital Signs:\nBlood Pressure: Ranges from 140/85 mmHg to 150/95 mmHg\nHeart Rate: Ranges from 88 bpm to 92 bpm\nRespiratory Rate: Ranges from 18 to 22 breaths/min\nTemperature: 98.6째F to 98.7째F\n\nPhysical Examination:\nCardiovascular Examination:\nSystolic murmur at lower sternal border noted during initial evaluation; otherwise, regular rhythm and no murmurs observed in subsequent evaluations.\nNeurological Examination:\nNo focal deficits observed in all evaluations. Cranial nerves II-XII intact.\n\nDiagnoses\nStable angina: Symptoms correlate with exertion and include chest pain and pressure.\nPossible coronary artery disease: Further evaluation recommended.\nUncontrolled hypertension: Likely secondary to stress.\n\nTreatment Recommendations\nMedications:\nAmlodipine 5 mg once daily\nNitroglycerin 0.4 mg as needed for chest pain\nMetoprolol 25 mg once daily\nLisinopril 10 mg once daily\nAtorvastatin 20 mg once daily\n\nLifestyle Modifications:\nDietary interventions and exercise\n\nReferrals:\nCardiology for further evaluation\nCardiac rehabilitation referral\n\nDiagnostic Tests:\nSchedule treadmill stress test\nFollow-up lipid panel in 3 months\nFollow-Up Instructions\nReturn in 2 weeks for stress test results and blood pressure check.\nReevaluation in 1 month for comprehensive assessment of symptoms and treatment efficacy.\n\nConclusion\nJohn Smith is being managed for stable angina and hypertension with a comprehensive treatment plan that includes medications, lifestyle modifications, and referrals for further evaluation. Continuous monitoring and follow-up appointments are essential to optimize his cardiovascular health and manage symptoms effectively.",
  "input: report 1 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\nChief Complaints: ['1. Chest pain radiating to left arm\\n2. Shortness of breath\\n3. Dizziness and lightheadedness']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 150/95 mmHg', 'Heart': 'Rate 92 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Systolic murmur at lower sternal border, Regular rhythm\nNeurological: No focal deficits, Cranial nerves II-XII intact\nDiagnosis: Stable angina, possible coronary artery disease.\nTreatment Recommendations: ['1. Start Amlodipine 5mg once daily\\n2. Nitroglycerin for chest pain as needed\\n3. Refer to cardiology for further evaluation']\nFollow-Up Instructions: Return in 1 month for reevaluation.\n\nreport 2 : Report Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: Downtown Medical Center\nDate of Visit: 2024-09-12\nDoctor: Dr. Robert Allen\nChief Complaints: ['1. Intermittent chest pressure\\n2. Episodes of fatigue\\n3. Occasional palpitations']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 145/90 mmHg', 'Heart': 'Rate 88 bpm', 'Respiratory': 'Rate 22 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: None\nNeurological: None\nDiagnosis: Stable angina; recommend exercise tolerance test.\nTreatment Recommendations: ['1. Start Metoprolol 25mg once daily\\n2. Schedule treadmill stress test\\n3. Cardiac rehabilitation referral']\nFollow-Up Instructions: Return in 2 weeks for stress test results.\n\nReport 3:\nReport Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-09-20\nDoctor: Dr. Robert Johnson\nChief Complaints: ['1. Severe fatigue\\n2. Occasional palpitations\\n3. Difficulty sleeping']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 140/85 mmHg', 'Heart': 'Rate 88 bpm', 'Respiratory': 'Rate 18 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: Regular rhythm, no murmurs\nNeurological: No focal deficits observed\nDiagnosis: Uncontrolled hypertension, likely secondary to stress.\nTreatment Recommendations: ['1. Start Lisinopril 10mg once daily\\n2. Advise lifestyle modifications (diet and exercise)\\n3. Schedule follow-up in 2 weeks for blood pressure check']\nFollow-Up Instructions: Return in 2 weeks for follow-up.\n\n\nReport 4:\nReport Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-09-10\nDoctor: Dr. Sarah Johnson\nChief Complaints: ['1. Frequent headaches\\n2. Occasional nausea\\n3. Fatigue']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 130/85 mmHg', 'Heart': 'Rate 78 bpm', 'Respiratory': 'Rate 18 breaths/min', 'Temperature': '98.7째F'}\nPhysical Examination: Neurological: No focal deficits observed.\nGeneral: Patient appears well-nourished and in no acute distress.\nDiagnosis: Tension-type headaches, possible migraine triggers.\nTreatment Recommendations: ['1. Prescribe Ibuprofen 400mg as needed for headaches.\\n2. Advise lifestyle modifications: Hydration', 'regular meals.\\n3. Follow-up in 2 weeks to reassess.']\nFollow-Up Instructions: Schedule a follow-up in 2 weeks.\n\nReport 5:\nReport Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-09-12\nDoctor: Dr. Michael Johnson\nChief Complaints: ['1. Severe fatigue\\n2. Occasional palpitations\\n3. Mild swelling in the ankles']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 130/85 mmHg', 'Heart': 'Rate 78 bpm', 'Respiratory': 'Rate 18 breaths/min', 'Temperature': '98.4째F'}\nPhysical Examination: Cardiovascular: Regular rhythm, no murmurs\nRespiratory: Clear to auscultation bilaterally\nDiagnosis: Uncontrolled hypertension, consider medication adjustment.\nTreatment Recommendations: ['1. Increase Lisinopril to 20mg once daily\\n2. Monitor blood pressure weekly\\n3. Follow-up in 2 weeks for re-evaluation']\nFollow-Up Instructions: Return in 2 weeks for blood pressure check.\n\nReport 6:\nReport Type: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-09-20\nDoctor: Dr. Emily White\nChief Complaints: ['1. Persistent cough\\n2. Shortness of breath during exertion\\n3. Occasional chest discomfort']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 135/90 mmHg', 'Heart': 'Rate 82 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '97.8째F'}\nPhysical Examination: Respiratory: Wheezing noted on expiration\nCardiovascular: No murmurs; regular rhythm\nDiagnosis: Asthma exacerbation; consider inhaler prescription.\nTreatment Recommendations: ['1. Prescribe Albuterol inhaler as needed\\n2. Advise daily use of Fluticasone inhaler\\n3. Follow-up in 1 month for asthma management']\nFollow-Up Instructions: Return in 1 month for reassessment.",
  "output: Comprehensive Clinical Evaluation Report\n\nPatient Information\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\n\nChief Complaints:\nChest pain radiating to left arm\nShortness of breath during exertion\nDizziness and lightheadedness\nIntermittent chest pressure\nSevere fatigue\nOccasional palpitations\nFrequent headaches\nMild swelling in the ankles\nPersistent cough\nOccasional nausea\nDifficulty sleeping\n\nVital Signs:\nBlood Pressure: Ranges from 130/85 mmHg to 150/95 mmHg\nHeart Rate: Ranges from 78 bpm to 92 bpm\nRespiratory Rate: Ranges from 18 to 22 breaths/min\nTemperature: Ranges from 97.8째F to 98.7째F\n\n\nCardiovascular Examination:\nSystolic murmur noted during the initial evaluation; otherwise, regular rhythm and no murmurs observed in subsequent evaluations.\nMild swelling in ankles noted in one visit.\nNeurological Examination:\nNo focal deficits observed in all evaluations. Cranial nerves II-XII intact.\nRespiratory Examination:\nWheezing noted during one visit, with shortness of breath and persistent cough reported.\n\nPhysical Examination:\nPatient appeared well-nourished and in no acute distress during evaluations.\n\nDiagnoses\nStable Angina: Symptoms correlate with exertion, including chest pain and pressure.\nUncontrolled Hypertension: Likely secondary to stress; medication adjustment recommended.\nTension-Type Headaches: Possible migraine triggers identified.\nAsthma Exacerbation: Shortness of breath and wheezing noted; inhaler prescription considered.\n\nTreatment Recommendations\nMedications:\nAmlodipine 5 mg once daily\nNitroglycerin 0.4 mg as needed for chest pain\nMetoprolol 25 mg once daily\nLisinopril 10-20 mg once daily (increase as needed)\nIbuprofen 400 mg as needed for headaches\nAlbuterol inhaler as needed; Fluticasone inhaler for daily use\n\nLifestyle Modifications:\nDietary interventions and regular exercise\nHydration and regular meals\n\nReferrals:\nCardiology for further evaluation\nCardiac rehabilitation referral\nDiagnostic Tests:\nSchedule treadmill stress test\nMonitor blood pressure weekly\nFollow-up lipid panel in 3 months\n\nFollow-Up Instructions\nReturn in 2 weeks for blood pressure check and follow-up on stress test results.\nReevaluation in 1 month for comprehensive assessment of symptoms, asthma management, and treatment efficacy.\n\nConclusion\nJohn Smith is being managed for stable angina, uncontrolled hypertension, tension-type headaches, and asthma exacerbation with a comprehensive treatment plan. Continuous monitoring and follow-up appointments are essential to optimize his overall health and manage symptoms effectively.",
  "input: Report 1:\nReport Type: Comprehensive Clinical Evaluation Report\nName: Sarah Johnson\nAge: 48\nDate of Birth: 1976-02-10\nGender: Female\nHospital: Green Valley Medical Center\nDate of Visit: 2024-07-20\nDoctor: Dr. Jessica Lee\nChief Complaints: ['1. Persistent fatigue\\n2. Frequent headaches\\n3. Difficulty concentrating']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 130/85 mmHg', 'Heart': 'Rate 78 bpm', 'Respiratory': 'Rate 18 breaths/min', 'Temperature': '98.4째F'}\nCardiovascular: No abnormalities detected\nNeurological: Mild tension-type headache; no other neurological signs\nDiagnosis: Chronic Fatigue Syndrome\nTreatment Recommendations: ['1. Increase fluid intake\\n2. Schedule physical therapy\\n3. Consider sleep study if symptoms persist']\nFollow-Up Instructions: Return in 1 month for re-evaluation.\n\nReport 2:\nReport Type: Comprehensive Clinical Evaluation Report\nName: Sarah Johnson\nAge: 48\nDate of Birth: 1976-02-10\nGender: Female\nHospital: Sunrise Community Hospital\nDate of Visit: 2024-08-15\nDoctor: Dr. Alan Thomas\nChief Complaints: ['1. Increased fatigue\\n2. Episodes of joint pain\\n3. Difficulty sleeping']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 128/82 mmHg', 'Heart': 'Rate 80 bpm', 'Respiratory': 'Rate 19 breaths/min', 'Temperature': '98.6째F'}\nCardiovascular: Regular rhythm, no murmurs\nNeurological: No deficits, normal cognitive function\nDiagnosis: Fibromyalgia\nTreatment Recommendations: ['1. Start Duloxetine 30mg once daily\\n2. Recommend cognitive behavioral therapy\\n3. Initiate a low-impact exercise program']\nFollow-Up Instructions: Return in 6 weeks to assess treatment response.\n\nReport 3:\nReport Type: Comprehensive Clinical Evaluation Report\nName: Sarah Johnson\nAge: 49\nDate of Birth: 1976-02-10\nGender: Female\nHospital: Maplewood Hospital\nDate of Visit: 2024-09-30\nDoctor: Dr. Rachel Green\nChief Complaints: ['1. Worsening joint pain\\n2. Sleep disturbances\\n3. New onset of anxiety symptoms']\nVital Signs: {'Vital': 'Sign Value', 'Blood': 'Pressure 135/88 mmHg', 'Heart': 'Rate 85 bpm', 'Respiratory': 'Rate 20 breaths/min', 'Temperature': '98.7째F'}\nCardiovascular: No signs of distress, normal heart sounds\nNeurological: Anxiety symptoms present, otherwise unremarkable\nDiagnosis: Fibromyalgia with anxiety\nTreatment Recommendations: ['1. Increase Duloxetine to 60mg once daily\\n2. Start low-dose Lorazepam as needed for anxiety\\n3. Recommend physical therapy']\nFollow-Up Instructions: Return in 1 month for follow-up and medication review.",
  "output: Name: Emily Davis\nAge: 62\nDate of Birth: 1962-03-22\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 5.4 - 6.0 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 12.8 - 13.2 g/dL (Reference Range: 12.0 - 16.0 g/dL)\nHematocrit: 37% - 39% (Reference Range: 36.0 - 46.0%)\nPlatelet Count: 275 - 300 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 190 - 220 mg/dL (Reference Range: <200 mg/dL)\nLDL: 100 - 140 mg/dL (Reference Range: <100 mg/dL)\nHDL: 50 - 60 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 140 - 150 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation:\nNormal lipid profile with mild elevation in total cholesterol and moderate dyslipidemia noted; dietary modifications and lifestyle changes are advised.\n\nRecommendations:\nAnnual follow-up for routine lab tests.\nRepeat lipid panel in 3 months.\nFollow-up lipid panel in 6 months and consider referral to a dietitian.",
  "input: Report 1:\nReport Type: Lab and Diagnostic Report\nName: Emily Davis\nAge: 62\nDate of Birth: 1962-03-22\nHospital: Willow Creek Hospital\nDate of Report: 2024-08-20\nDoctor: Dr. Mark Thompson\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 5.4 x 10^9/L, Reference Range: 4.0-11.0 x 10^9/L\nHemoglobin: 13.0 g/dL, Reference Range: 12.0-16.0 g/dL\nHematocrit: 38%, Reference Range: 36.0-46.0%\nPlatelet Count: 300 x 10^9/L, Reference Range: 150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol: 190 mg/dL, Reference Range: <200 mg/dL\nLDL: 100 mg/dL, Reference Range: <100 mg/dL\nHDL: 60 mg/dL, Reference Range: >40 mg/dL\nTriglycerides: 150 mg/dL, Reference Range: <150 mg/dL\n\nInterpretation: Normal lipid profile; maintain current diet and exercise regimen.\nRecommendations: Annual follow-up for routine lab tests.\n\nReport 2:\nReport Type: Lab and Diagnostic Report\nName: Emily Davis\nAge: 62\nDate of Birth: 1962-03-22\nHospital: Sunnyvale Medical Center\nDate of Report: 2024-09-15\nDoctor: Dr. Lisa Reynolds\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 6.0 x 10^9/L, Reference Range: 4.0-11.0 x 10^9/L\nHemoglobin: 13.2 g/dL, Reference Range: 12.0-16.0 g/dL\nHematocrit: 39%, Reference Range: 36.0-46.0%\nPlatelet Count: 275 x 10^9/L, Reference Range: 150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol: 210 mg/dL, Reference Range: <200 mg/dL\nLDL: 130 mg/dL, Reference Range: <100 mg/dL\nHDL: 50 mg/dL, Reference Range: >40 mg/dL\nTriglycerides: 140 mg/dL, Reference Range: <150 mg/dL\n\nInterpretation: Mild elevation in total cholesterol; dietary modifications recommended.\nRecommendations: Repeat lipid panel in 3 months.\n\nReport 3:\nReport Type: Lab and Diagnostic Report\nName: Emily Davis\nAge: 62\nDate of Birth: 1962-03-22\nHospital: Riverbend Medical Center\nDate of Report: 2024-10-10\nDoctor: Dr. Brian White\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 5.8 x 10^9/L, Reference Range: 4.0-11.0 x 10^9/L\nHemoglobin: 12.8 g/dL, Reference Range: 12.0-16.0 g/dL\nHematocrit: 37%, Reference Range: 36.0-46.0%\nPlatelet Count: 290 x 10^9/L, Reference Range: 150-400 x 10^9/L\n\nLipid Profile:\nTotal Cholesterol: 220 mg/dL, Reference Range: <200 mg/dL\nLDL: 140 mg/dL, Reference Range: <100 mg/dL\nHDL: 55 mg/dL, Reference Range: >40 mg/dL\nTriglycerides: 180 mg/dL, Reference Range: <150 mg/dL\n\nInterpretation: Moderate dyslipidemia; lifestyle changes advised.\nRecommendations: Follow-up lipid panel in 6 months and consider referral to a dietitian.",
  "output: Name: Emily Davis\nAge: 62\nDate of Birth: 1962-03-22\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 5.4 - 6.0 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 12.8 - 13.2 g/dL (Reference Range: 12.0 - 16.0 g/dL)\nHematocrit: 37% - 39% (Reference Range: 36.0 - 46.0%)\nPlatelet Count: 275 - 300 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nLipid Profile:\nTotal Cholesterol: 190 - 220 mg/dL (Reference Range: <200 mg/dL)\nLDL: 100 - 140 mg/dL (Reference Range: <100 mg/dL)\nHDL: 50 - 60 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 140 - 150 mg/dL (Reference Range: <150 mg/dL)\n\nInterpretation:\nNormal lipid profile with mild elevation in total cholesterol and moderate dyslipidemia noted; dietary modifications and lifestyle changes are advised.\n\nRecommendations:\nAnnual follow-up for routine lab tests.\nRepeat lipid panel in 3 months.\nFollow-up lipid panel in 6 months and consider referral to a dietitian.",
  "input: Report 1:\nPrescription and Medication Management Report\n\nPatient Information:\nName: Sarah Johnson\nAge: 45\nDate of Birth: 1979-03-22\n\nMedications Prescribed:\n\nMedication: Lisinopril\nDosage: 10mg\nFrequency: Once daily\n\nMedication: Metformin\nDosage: 500mg\nFrequency: Twice daily\n\nMedication: Simvastatin\nDosage: 20mg\nFrequency: Once daily\n\nObservations:\nMonitor for side effects: Cough, Dizziness, Gastrointestinal upset.\nRenal function tests for lisinopril recommended in 4 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.\nGenerated by Healthcare System\n\nReport 2:\nPrescription and Medication Management Report\n\nPatient Information:\nName: Sarah Johnson\nAge: 45\nDate of Birth: 1979-03-22\nHospital: City Hospital\nDate: 2024-09-20\nDoctor: Dr. Michael Thompson\n\nMedications Prescribed:\n\nMedication: Glipizide\nDosage: 5mg\nFrequency: Once daily\n\nMedication: Aspirin\nDosage: 81mg\nFrequency: Once daily\n\nMedication: Metformin\nDosage: 1000mg\nFrequency: Twice daily\n\nObservations:\nMonitor for side effects: Hypoglycemia, Gastrointestinal upset.\nLiver function tests for aspirin recommended in 6 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "output: Patient Information:\nName: Sarah Johnson\nAge: 45\nDate of Birth: 1979-03-22\n\nMedications Prescribed:\n\nLisinopril\nDosage: 10 mg\nFrequency: Once daily\n\nMetformin\nDosage: 500 mg\nFrequency: Twice daily\n\nSimvastatin\nDosage: 20 mg\nFrequency: Once daily\n\nGlipizide\nDosage: 5 mg\nFrequency: Once daily\n\nAspirin\nDosage: 81 mg\nFrequency: Once daily\n\nObservations:\nMonitor for side effects:\nLisinopril: Cough, Dizziness, Gastrointestinal upset\nMetformin: Gastrointestinal upset\nGlipizide: Hypoglycemia\nLiver function tests for aspirin recommended in 6 weeks.\nRenal function tests for lisinopril recommended in 4 weeks.\n\nNext Review:\nReturn in 1 month for evaluation.",
  "input: Report 1:\nName: David Miller\nAge: 62\nDate of Birth: 1962-04-10\nHospital: Westside Medical Center\nDate of Consultation: 2024-07-20\nSpecialist: Dr. James Baker\nConsultation Reason: Evaluation of shortness of breath and possible heart failure.\nSpecialist Findings: Echocardiogram revealed reduced ejection fraction; signs of congestive heart failure.\nRecommendations: Start on ACE inhibitors and beta-blockers; follow-up echocardiogram in 3 months. Referral to cardiology for heart failure management.\n\nReport 2:\nSpecialist Consultation Report\n\nName: David Miller\nAge: 62\nDate of Birth: 1962-04-10\nHospital: City Heart Clinic\nDate of Consultation: 2024-08-22\nSpecialist: Dr. Rachel Thompson\nConsultation Reason: Monitoring of heart failure symptoms and treatment adjustment.\nSpecialist Findings: Mild improvement in symptoms; fluid retention still present. Blood pressure stable.\nRecommendations: Increase diuretic dosage; restrict fluid intake further. Regular blood pressure monitoring and sodium-restricted diet advised.\n\nReport 3:\nName: David Miller\nAge: 62\nDate of Birth: 1962-04-10\nHospital: Eastside Cardiology\nDate of Consultation: 2024-09-25\nSpecialist: Dr. Linda Morgan\nConsultation Reason: Re-evaluation after treatment changes for heart failure.\nSpecialist Findings: Notable improvement in shortness of breath; weight stable. Echo shows slight improvement in ejection fraction.\nRecommendations: Continue current medications; follow-up in 6 months for cardiac MRI. Encourage mild exercise and strict adherence to low-sodium diet.",
  "output: Specialist Consultation Report\n\nPatient Information:\nName: David Miller\nAge: 62\nDate of Birth: 1962-04-10\n\nConsultation Reason:\nEvaluation and management of heart failure symptoms.\n\nFindings:\n\nEchocardiogram: Revealed reduced ejection fraction, signs of congestive heart failure.\nFluid Retention: Mild improvement in symptoms but fluid retention still present.\nBlood Pressure: Stable during consultations.\nFollow-up Echo: Slight improvement in ejection fraction.\nRecommendations:\n\nStart on ACE inhibitors and beta-blockers.\nIncrease diuretic dosage; restrict fluid intake further.\nFollow-up echocardiogram in 3 months; cardiac MRI in 6 months.\nContinue medications, adhere to a sodium-restricted diet, and mild exercise advised.\nPatient Education:\n\nRegular blood pressure monitoring.\nImportance of lifestyle modifications, including a low-sodium diet.\nNext Review:\n\nFollow-up cardiac MRI in 6 months.",
  "input: Name: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nHospital: Riverside Health Center\nDate of Consultation: 2024-06-10\nSpecialist: Dr. Michael Reed\nConsultation Reason: Persistent migraines and visual disturbances.\nSpecialist Findings: MRI showed no structural abnormalities; symptoms suggestive of chronic migraine.\nRecommendations: Start on Topiramate 25 mg daily; avoid triggers like caffeine and stress. Follow-up in 2 months for medication adjustment.\n\nReport 2:\nSpecialist Consultation Report\n\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nHospital: Central Neurology Clinic\nDate of Consultation: 2024-07-15\nSpecialist: Dr. Laura Kim\nConsultation Reason: Follow-up for migraine treatment effectiveness.\nSpecialist Findings: Reduction in headache frequency, but some mild side effects from medication (drowsiness). No visual disturbances reported.\nRecommendations: Increase Topiramate to 50 mg daily; regular hydration advised. Follow-up in 1 month to reassess side effects and migraine frequency.\n\nReport 3:\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nHospital: Lakeside General Hospital\nDate of Consultation: 2024-08-20\nSpecialist: Dr. James Collins\nConsultation Reason: Reevaluation of chronic migraine after medication increase.\nSpecialist Findings: Significant improvement in migraine control; patient tolerating medication well with no new side effects.\nRecommendations: Maintain current dose of Topiramate; continue avoiding migraine triggers. Next review in 6 months unless symptoms worsen.",
  "output: Patient Information:Name: Sarah ThompsonAge: 48Date of Birth: 1976-03-22Consultation Reason:Evaluation and management of chronic migraines and visual disturbances.Findings:MRI Results: No structural abnormalities detected; symptoms consistent with chronic migraine.Medication Response: Reduction in headache frequency following treatment with Topiramate, though mild side effects (drowsiness) were noted.Current Status: Significant improvement in migraine control, with no new side effects after medication adjustment.Recommendations:Start on Topiramate 25 mg daily; increased to 50 mg daily at follow-up.Avoid known migraine triggers, including caffeine and stress.Maintain regular hydration to reduce side effects.Continue current dose of Topiramate.Next Review:Follow-up in 6 months unless symptoms worsen.",
  "input: Report 1: Comprehensive Clinical Evaluation Report\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nGender: Female\nHospital: Riverside Health Center\nDate of Visit: 2024-07-05\nDoctor: Dr. Michael Reed\nChief Complaints:\n\nPersistent headaches\nOccasional blurry vision\nLight sensitivity\nVital Signs:\n\nBlood Pressure: 135/85 mmHg\nHeart Rate: 76 bpm\nRespiratory Rate: 18 breaths/min\nTemperature: 98.4째F\nNeurological Exam:\n\nMild tenderness over the frontal sinus area\nCranial nerves II-XII intact\nDiagnosis:\nChronic migraine with visual aura.\n\nTreatment Recommendations:\n\nStart on Sumatriptan 50mg for acute episodes.\nPrescription sunglasses for light sensitivity.\nSchedule an MRI to rule out structural abnormalities.\nFollow-Up Instructions:\nReturn in 1 month or sooner if symptoms worsen.\n\nReport 2: Lab and Diagnostic Report\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nHospital: Riverside Health Center\nDate of Report: 2024-07-12\nDoctor: Dr. Laura Kim\n\nComplete Blood Count (CBC):\n\nWhite Blood Cells: 5.8x10^9/L, Reference Range: 4.0-11.0 x 10^9/L\nHemoglobin: 13.7 g/dL, Reference Range: 13.0-17.0 g/dL\nHematocrit: 41%, Reference Range: 38.0-50.0%\nPlatelet Count: 210x10^9/L, Reference Range: 150-400 x 10^9/L\nElectrolyte Panel:\n\nSodium: 139 mmol/L, Reference Range: 135-145 mmol/L\nPotassium: 4.1 mmol/L, Reference Range: 3.5-5.0 mmol/L\nChloride: 102 mmol/L, Reference Range: 98-106 mmol/L\nMRI Results:\n\nNo significant abnormalities detected.\nInterpretation:\nNo structural abnormalities; likely neurological cause for migraines.\n\nRecommendations:\nContinue current migraine management plan. Follow-up in 3 months.\n\nReport 3: Comprehensive Clinical Evaluation Report\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nGender: Female\nHospital: Central Neurology Clinic\nDate of Visit: 2024-08-15\nDoctor: Dr. James Collins\nChief Complaints:\n\nReduced headache frequency but persistent visual aura.\nMild fatigue.\nVital Signs:\n\nBlood Pressure: 130/80 mmHg\nHeart Rate: 70 bpm\nRespiratory Rate: 16 breaths/min\nTemperature: 98.2째F\nNeurological Exam:\n\nVisual fields normal.\nCranial nerves II-XII intact.\nDiagnosis:\nImprovement in chronic migraine symptoms.\n\nTreatment Recommendations:\n\nContinue Sumatriptan 50mg as needed.\nConsider prophylactic treatment with Propranolol 10mg daily.\nContinue to monitor triggers and avoid caffeine.\nFollow-Up Instructions:\nReturn in 6 weeks for reassessment of symptoms.",
  "output: Unified Clinical Evaluation Report\n\nPatient Information:\n\nName: Sarah Thompson\nAge: 48\nDate of Birth: 1976-03-22\nGender: Female\n\nChief Complaints:\nPersistent headaches\nOccasional blurry vision\nLight sensitivity\n\nVital Signs:\nBlood Pressure: 135/85 mmHg\nHeart Rate: 76 bpm\nRespiratory Rate: 18 breaths/min\nTemperature: 98.4째F\n\nPhysical Examination:\nNeurological Exam:\nMild tenderness over the frontal sinus area\nCranial nerves II-XII intact\n\nDiagnosis:\nChronic migraine with visual aura.\nLab and Diagnostic Findings:\n\nComplete Blood Count (CBC):\nWhite Blood Cells: 5.8 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 13.7 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 41% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 210 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\n\nElectrolyte Panel:\nSodium: 139 mmol/L (Reference Range: 135 - 145 mmol/L)\nPotassium: 4.1 mmol/L (Reference Range: 3.5 - 5.0 mmol/L)\nChloride: 102 mmol/L (Reference Range: 98 - 106 mmol/L)\n\nMRI Results:\nNo significant abnormalities detected.\n\nInterpretation:\nNo structural abnormalities; likely neurological cause for migraines.\n\nTreatment Recommendations:\nStart on Sumatriptan 50 mg for acute episodes.\nPrescription sunglasses for light sensitivity.\nConsider prophylactic treatment with Propranolol 10 mg daily.\nContinue to monitor triggers and avoid caffeine.\nFollow-up in 1 month or sooner if symptoms worsen.\nContinue current migraine management plan. Follow-up in 3 months for further evaluation.\n\nFollow-Up Instructions:\nReturn in 6 weeks for reassessment of symptoms and to discuss further management.",
  "input: Report 1: Comprehensive Clinical Evaluation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\nHospital: City General Hospital\nDate of Visit: 2024-08-12\nDoctor: Dr. Emily Wong\n\nChief Complaints:\n\nChest pain radiating to left arm\nShortness of breath\nDizziness and lightheadedness\nVital Signs:\n\nBlood Pressure: 150/95 mmHg\nHeart Rate: 92 bpm\nRespiratory Rate: 20 breaths/min\nTemperature: 98.6째F\nCardiovascular:\n\nSystolic murmur at lower sternal border\nRegular rhythm\nNeurological:\n\nNo focal deficits\nCranial nerves II-XII intact\nDiagnosis:\nStable angina, possible coronary artery disease.\n\nTreatment Recommendations:\n\nStart Amlodipine 5mg once daily\nNitroglycerin for chest pain as needed\nRefer to cardiology for further evaluation\nFollow-Up Instructions:\nReturn in 1 month for reevaluation.\n\nReport 2: Lab and Diagnostic Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate of Report: 2024-08-15\nDoctor: Dr. Emily Wong\n\nComplete Blood Count (CBC):\n\nWhite Blood Cells: 6.5 x 10^9/L (Reference Range: 4.0-11.0 x 10^9/L)\nHemoglobin: 14.2 g/dL (Reference Range: 13.0-17.0 g/dL)\nHematocrit: 43% (Reference Range: 38.0-50.0%)\nPlatelet Count: 240 x 10^9/L (Reference Range: 150-400 x 10^9/L)\nLipid Profile:\n\nTotal Cholesterol: 230 mg/dL (Reference Range: <200 mg/dL)\nLDL: 145 mg/dL (Reference Range: <100 mg/dL)\nHDL: 40 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 180 mg/dL (Reference Range: <150 mg/dL)\nInterpretation:\nMild dyslipidemia with elevated cholesterol levels; further evaluation recommended.\n\nRecommendations:\nSchedule a follow-up in 3 months for repeat lipid panel and lifestyle modification assessment.\n\nReport 3: Medication Management Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate: 2024-08-12\nDoctor: Dr. Emily Wong\n\nMedications Prescribed:\n\nMedication: Amlodipine\n\nDosage: 5mg\nFrequency: Once daily\nMedication: Nitroglycerin\n\nDosage: 0.4mg\nFrequency: As needed for chest pain\nMedication: Atorvastatin\n\nDosage: 20mg\nFrequency: Once daily\nObservations:\nMonitor for side effects: Edema, dizziness, and possible liver function changes with atorvastatin.\n\nNext Review:\nReturn in 1 month for medication review and assessment of side effects.\n\nReport 4: Specialist Consultation Report\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nHospital: City General Hospital\nDate of Consultation: 2024-09-05\nSpecialist: Dr. Richard Hall\n\nConsultation Reason: Evaluation of stable angina and coronary artery disease risk.\n\nSpecialist Findings:\n\nCoronary angiography indicated based on symptom history and risk factors.\nNotable hypertension and hyperlipidemia identified.\nRecommendations:\n\nSchedule coronary angiography for further assessment.\nInitiate lifestyle changes, including diet and exercise modifications.\nFollow-up appointment in 2 weeks to discuss angiography results and treatment plan.",
  "output: Comprehensive Clinical Evaluation Report\nPatient Information:\n\nName: John Smith\nAge: 56\nDate of Birth: 1968-05-15\nGender: Male\n\nChief Complaints:\nChest pain radiating to the left arm\nShortness of breath\nDizziness and lightheadedness\nVital Signs:\nBlood Pressure: 150/95 mmHg\nHeart Rate: 92 bpm\nRespiratory Rate: 20 breaths/min\nTemperature: 98.6째F\nCardiovascular Examination:\nSystolic murmur at the lower sternal border\nRegular rhythm\nNeurological Examination:\nNo focal deficits\nCranial nerves II-XII intact\nDiagnosis:\nStable angina, possible coronary artery disease.\nLab and Diagnostic Findings:\nComplete Blood Count (CBC):\n\nWhite Blood Cells: 6.5 x 10^9/L (Reference Range: 4.0 - 11.0 x 10^9/L)\nHemoglobin: 14.2 g/dL (Reference Range: 13.0 - 17.0 g/dL)\nHematocrit: 43% (Reference Range: 38.0 - 50.0%)\nPlatelet Count: 240 x 10^9/L (Reference Range: 150 - 400 x 10^9/L)\nLipid Profile:\n\nTotal Cholesterol: 230 mg/dL (Reference Range: <200 mg/dL)\nLDL: 145 mg/dL (Reference Range: <100 mg/dL)\nHDL: 40 mg/dL (Reference Range: >40 mg/dL)\nTriglycerides: 180 mg/dL (Reference Range: <150 mg/dL)\nInterpretation:\n\nMild dyslipidemia with elevated cholesterol levels; further evaluation recommended.\nTreatment Recommendations:\nMedications Prescribed:\n\nAmlodipine: 5mg once daily\nNitroglycerin: 0.4mg as needed for chest pain\nAtorvastatin: 20mg once daily\nObservations:\n\nMonitor for side effects: Edema, dizziness, and possible liver function changes with atorvastatin.\nLifestyle Modifications:\n\nInitiate lifestyle changes, including diet and exercise modifications.\nFollow-Up Instructions:\n\nReturn in 1 month for reevaluation and medication review.\nSchedule coronary angiography for further assessment.\nFollow-up appointment in 2 weeks to discuss angiography results and treatment plan.",
])

print(response.text)

# Save the response text to summary_report.txt
with open("summary_report.txt", "w") as file:
    file.write(response.text)

# Set the API key (default or from environment variable)
api_key = os.environ.get("GOOGLE_API_KEY", "AIzaSyA8ZnWH9Kp2cOvp__OYVLJlrMeZcT4vmQg")

# Initialize the Gemini model
llm = ChatGoogleGenerativeAI(google_api_key=api_key, temperature=0.7, model="gemini-pro")

# Define the prompt template for extracting key-value pairs from the medical report
prompt_template = PromptTemplate(
    input_variables=["report_text"],
    template=(
        "Extract key-value pairs from the following clinical evaluation report in the format {{key: value}}:\n"
        "{report_text}\n"
        "Output the result as a list of key-value pairs, each in the format {{key: value}}."
        "If there is something to be put in points you can put them in the same line separated with $$"
        "If under a specific heading more points are there dont separate it"
    )
)

# Create the LLM chain
extraction_chain = LLMChain(llm=llm, prompt=prompt_template)

# Function to extract key-value pairs from the medical report
def extract_report_details(report_text):
    # Generate the extraction response from the LLM
    response = extraction_chain.run({
        "report_text": report_text
    })
    return response

# Main execution
if __name__ == "__main__":

    # Read the clinical evaluation report from summary_report.txt
    with open("summary_report.txt", "r") as file:
        report_text = file.read()

    # Extract key-value pairs from the report
    extracted_details = extract_report_details(report_text)

    # Print the extracted key-value pairs
    print("Extracted Key-Value Pairs:")
    print(extracted_details)

    # Write the extracted key-value pairs to key_value.txt
    with open("key_value.txt", "w") as output_file:
        output_file.write(extracted_details)


def parse_input(input_text):
    # Use regex to extract key-value pairs from the curly braces format
    pattern = r"\{(.*?):\s(.*?)\}"
    matches = re.findall(pattern, input_text)
    
    # Process the matches to replace '\\n' with actual newlines and '$$' with bullet points
    data = {}
    for key, value in matches:
        # Preserve $$ for bulleted lists later
        data[key.strip()] = value.replace("\\n", "\n").strip()
    return data

def format_value(value, styles):
    """
    Checks if the value contains $$ indicating a bulleted list and formats it appropriately.
    """
    if "$$" in value:
        # Split the value into a list of bullet points
        items = value.split("$$")
        bullet_list = ListFlowable(
            [ListItem(Paragraph(item.strip(), styles['Normal'])) for item in items],
            bulletType='bullet'
        )
        return bullet_list
    else:
        return Paragraph(value, styles['Normal'])

def create_pdf(filename, data):
    # Initialize the PDF document
    doc = SimpleDocTemplate(filename, pagesize=A4)
    elements = []
    styles = getSampleStyleSheet()

    # Add a title
    title = Paragraph("Clinical Report", styles['Title'])
    elements.append(title)
    elements.append(Spacer(1, 0.5 * inch))

    # Create the table data from input key-value pairs
    table_data = []
    for key, value in data.items():
        # Add each key and its formatted value (either bullet list or plain text)
        formatted_value = format_value(value, styles)
        table_data.append([Paragraph(f"<b>{key}</b>", styles['Normal']), formatted_value])

    # Create the table and format it
    table = Table(table_data, colWidths=[2.5 * inch, 4.5 * inch])
    table.setStyle(TableStyle([
        ('BACKGROUND', (0, 0), (-1, 0), colors.lightblue),
        ('TEXTCOLOR', (0, 0), (-1, 0), colors.white),
        ('ALIGN', (0, 0), (-1, -1), 'LEFT'),
        ('FONTNAME', (0, 0), (-1, 0), 'Helvetica-Bold'),
        ('FONTSIZE', (0, 0), (-1, -1), 10),
        ('BOTTOMPADDING', (0, 0), (-1, 0), 12),
        ('BACKGROUND', (0, 1), (-1, -1), colors.whitesmoke),
        ('GRID', (0, 0), (-1, -1), 1, colors.black),
    ]))

    elements.append(table)
    elements.append(Spacer(1, 0.2 * inch))

    # Build the PDF
    doc.build(elements)

# Main execution
if __name__ == "__main__":
    # Read input from key_value.txt
    with open("key_value.txt", "r") as file:
        input_text = file.read()

    # Parse the input text to extract key-value pairs
    data = parse_input(input_text)

    # Generate the PDF
    create_pdf("clinical_report_bullet_points.pdf", data)

